{% extends "base.html" %}
{% block content %}

<style>
  .budget-container {
    max-width: 800px;
    margin: 30px auto;
    background-color: #ffffff;
    padding: 30px;
    border-radius: 16px;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
  }

  .budget-container h2 {
    text-align: center;
    margin-bottom: 25px;
    color: #2b6cb0;
    font-weight: 700;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.05);
  }

  .form-control {
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.03);
  }

  .table th, .table td {
    vertical-align: middle;
  }

  .btn {
    border-radius: 10px;
    padding: 10px 18px;
    font-weight: 600;
    box-shadow: 0 5px 12px rgba(0, 0, 0, 0.1);
    transition: all 0.2s ease;
  }

  .btn-secondary:hover {
    background-color: #5c636a;
  }

  .btn-primary:hover {
    background-color: #2b6cb0;
  }

  .alert {
    font-size: 16px;
    border-radius: 10px;
    text-align: center;
    padding: 12px 18px;
  }
</style>

<div class="budget-container">
  <h2>Monthly Budget Setup</h2>

  {% if msg %}
    <div class="alert alert-success">{{ msg }}</div>
  {% endif %}

  <form method="post">
    <div class="mb-3">
      <label>Start Date</label>
      <input type="date" name="start_date" class="form-control" required>
    </div>
    <div class="mb-3">
      <label>Total Budget</label>
      <input type="number" name="total_budget" step="0.01" class="form-control" required>
    </div>

    <h4 class="mt-4 mb-2">Categories</h4>
    <table id="categoriesTable" class="table table-bordered align-middle">
      <thead class="table-light">
        <tr><th>Category</th><th>Expected Amount</th><th>Action</th></tr>
      </thead>
      <tbody>
        <tr>
          <td><input type="text" name="category_name" class="form-control" placeholder="e.g. Groceries"></td>
          <td><input type="number" name="category_amount" class="form-control" placeholder="e.g. 100.00"></td>
          <td class="text-center"><button type="button" class="btn btn-sm btn-danger" onclick="removeRow(this)">×</button></td>
        </tr>
      </tbody>
    </table>

    <div class="d-flex justify-content-between">
      <button type="button" class="btn btn-secondary" onclick="addCategoryRow()">Add Category</button>
      <button type="submit" class="btn btn-primary">Save Budget</button>
    </div>
  </form>
</div>

<script>
  function addCategoryRow() {
    const table = document.getElementById("categoriesTable").getElementsByTagName('tbody')[0];
    const newRow = table.insertRow();

    newRow.innerHTML = `
      <td><input type="text" name="category_name" class="form-control" placeholder="e.g. Utilities"></td>
      <td><input type="number" name="category_amount" class="form-control" placeholder="e.g. 200.00"></td>
      <td class="text-center"><button type="button" class="btn btn-sm btn-danger" onclick="removeRow(this)">×</button></td>
    `;
  }

  function removeRow(button) {
    const row = button.closest("tr");
    row.remove();
  }
</script>

{% endblock %}
